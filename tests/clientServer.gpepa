n = 100.0; 
m = 60.0; 
rr = 2.0; 
rtmt = 0.3; 
rt = 0.27;
rb = 0.1; 
rd = 1.0; 
rrst = 1.0; 


$reward = acc(Servers:Server_get) + #think;
$tmp = (Servers:Server_get) + (Servers:Server_broken);  
$passage = %Clients:_<think>Done;

Client = (request,rr).Client_waiting; 
Client_waiting = (data,rd).Client_think; 
Client_think = (think,rt).Client; 

NotDone = (think,rt).Done; 
Done = (think,rt).Done;

Server = (request,rr).Server_get + (break,rb).Server_broken; 
Server_get = (data,rd).Server; 
Server_broken = (reset,rrst).Server; 

Clients{Client<think>NotDone[n]}<request,data>Servers{Server[m]}

Count think;

ODEs(stopTime=40.0,stepSize=0.1,density=10){
	E{$passage};
	Var{$reward};	
	E{$reward},E{$reward}+2.0*CM{$reward,2}^0.5,E{$reward}-2.0*CM{$reward,2}^0.5;
}


Iterate rb from 0.0 to 2.0 in 30 steps
	    m  from 1.0 to 100.0 in 50 steps
	    ODEs(stopTime=40.1,stepSize=0.1,density=10){} plot{
	    E{$reward} at 40.0 when E{$passage}/n at 15.0 >= 0.95 -> "tmp/reward";
}

//Compare(
/*ODEs(stopTime=40.0,stepSize=0.1,density=10){
	E{$passage};
	Var{$reward};	
	E{$reward},E{$reward}+2.0*CM{$reward,2}^0.5,E{$reward}-2.0*CM{$reward,2}^0.5;
}*//*,
Simulation(stopTime=40.0,stepSize=0.1,replications=100000){
	/*$passage;
	E{$reward},E{$reward}+2.0*CM{$reward,2}^0.5,E{$reward}-2.0*CM{$reward,2}^0.5;*/
}){
	$passage;
	Var{$reward};
	E{#think};
}*/
